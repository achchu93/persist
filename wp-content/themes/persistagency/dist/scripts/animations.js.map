{"version":3,"sources":["webpack:///./resources/assets/scripts/animations.js"],"names":["animSections","lotties","console","i","animElements","element","dataAnim","animation","container","renderer","loop","autoplay","path","obj","rendererSettings","preserveAspectRatio","parallaxSection","positionFromTop","triggerLottie","parallaxElems","scrolled","window","scrollPos","elem","setTimeout","fadeInSection","$","docViewTop","docViewBottom","elemTop","elemBottom","isVisible","thisText","statsValue","Counter","duration","easing","step","pieces","formatted","Math","start","complete","document","windowHeight","buildLotties","checkSection","runStatsCounter","pageHeader","init"],"mappings":";;;;;;;;;AACA,IAAIA,YAAY,GAAhB;;AAEA,CAAC,YAAW;AAEX;AAAA;AAAA,MAAiCC,OAAO,GAAxC;;AAEA,0BAAwB;AACvBC,WAAO,CAAPA;;AAEE,SAAK,IAAIC,CAAC,GAAV,GAAgBA,CAAC,GAAGC,YAAY,CAAhC,QAAyCD,CAAzC,IAA8C;AAC5C,UAAIE,OAAO,GAAGD,YAAY,CAA1B,CAA0B,CAA1B;AACH,UAAIE,QAAQ,GAAGD,OAAO,CAAPA,QAAf;;AAEA,UAAGC,QAAQ,IAAI,CAACN,YAAY,CAAZA,SAAhB,QAAgBA,CAAhB,EAAiD;AAChD,YAAIO,SAAS,GAAG,SAAS,CAAT,cAAyB;AACxCC,mBAAS,EAAEH,OAAO,CAAPA,cAD6B,aAC7BA,CAD6B;AAExCI,kBAAQ,EAFgC;AAGxCC,cAAI,EAHoC;AAIxCC,kBAAQ,EAJgC;AAKxCC,cAAI,EAAEC,GAAG,CAAHA,+CALkC;AAMxCC,0BAAgB,EAAE;AACjBC,+BAAmB,EAAE;AADJ;AANsB,SAAzB,CAAhB;AAWAd,eAAO,CAAPA,QAAO,CAAPA;AACA;AAEC;;AACHC,WAAO,CAAPA;AACA;;AAEA,0BAAwB;AACxBc,mBADwB,IAExB;AAEA;;AACE,SAAK,IAAIb,CAAC,GAAV,GAAgBA,CAAC,GAAGC,YAAY,CAAhC,QAAyCD,CAAzC,IAA8C;AAC5C,UAAIE,OAAO,GAAGD,YAAY,CAA1B,CAA0B,CAA1B;AACH,UAAIE,QAAQ,GAAGD,OAAO,CAAPA,QAAf;AAEG,UAAIY,eAAe,GAAGb,YAAY,CAAZA,CAAY,CAAZA,yBAAtB;;AACA,UAAIa,eAAe,GAAfA,gBAAJ,GAAyC;AAE3C,YAAGZ,OAAO,CAAPA,wCAAgDA,OAAO,CAAPA,mBAAnD,SAAmDA,CAAnD,EAAyF;AACxFA,iBAAO,CAAPA;AACAA,iBAAO,CAAPA;AACA;;AAED,YAAGC,QAAQ,IAAI,CAACN,YAAY,CAAZA,SAAhB,QAAgBA,CAAhB,EAAiD;AAChD;AACAA,sBAAY,CAAZA;AACAkB,uBAAa,CAAbA,OAAa,CAAbA;AAV0C,UAc3C;AACA;;AACG;AACF;AACF;;AAEF,kCAA+B;AAC5B,SAAK,IAAIf,CAAC,GAAV,GAAgBA,CAAC,GAAGC,YAAY,CAAhC,QAAyCD,CAAzC,IAA8C;AAC5C,UAAIE,OAAO,GAAGD,YAAY,CAA1B,CAA0B,CAA1B;AAEA,UAAIa,eAAe,GAAGb,YAAY,CAAZA,CAAY,CAAZA,yBAAtB;;AACA,UAAIa,eAAe,GAAfA,gBAAJ,GAAyC;AAC3Cf,eAAO,CAAPA;;AACA,YAAGG,OAAO,CAAPA,mBAAH,SAAGA,CAAH,EAAyC;AACxCA,iBAAO,CAAPA;AACAA,iBAAO,CAAPA;AACA;AAEE;AACF;AACH;;AAEA,6BAA2B;AACzB,SAAK,IAAIF,CAAC,GAAV,GAAgBA,CAAC,GAAGgB,aAAa,CAAjC,QAA0ChB,CAA1C,IAA+C;AAC7C,UAAIE,OAAO,GAAGc,aAAa,CADkB,CAClB,CAA3B,CAD6C,CAEhD;AACA;AACA;AACA;;AACC,UAAIC,QAAQ,GAAGC,MAAM,CAArB;AACA,UAAIC,SAAS,GAAG,EAAEF,QAAQ,GAA1B,IAAgB,CAAhB;AACAf,aAAO,CAAPA,oDAR+C,KAQ/CA,EAR+C,CAShD;AACA;AACA;;AAEF,+BAA6B;AAC5B,QAAG,CAACkB,IAAI,CAAJA,QAAJ,gBAAiCA,IAAI,CAAJA;AACjCrB,WAAO,CAAPA,qBAA6BqB,IAAI,CAAJA,QAA7BrB;;AACA,QAAGD,OAAO,CAACsB,IAAI,CAAJA,QAARtB,SAAO,CAAPA,IAAH,aAAmD;AAClDuB,gBAAU,CAAC,YAAM;AAChBvB,eAAO,CAACsB,IAAI,CAAJA,QAARtB,SAAO,CAAPA;AACAA,eAAO,CAACsB,IAAI,CAAJA,QAARtB,SAAO,CAAPA,8BAA6D,YAAW;AACvEC,iBAAO,CAAPA,IAAYqB,IAAI,CAAJA,QAAZrB;AACAuB,uBAAa,CAACF,IAAI,CAAJA,QAAdE,SAAa,CAAbA;AAFDxB;AAFS,SAMPsB,IAAI,CAAJA,QANHC,cAAU,CAAVA;AAOA;AACD;;AAEA,6BAA0B;AACxBE,KAAC,CAADA,cAAC,CAADA,MAAuB,YAAU;AAE/B,UAAIA,CAAC,CAADA,IAAC,CAADA,oBAA2BA,CAAC,CAADA,IAAC,CAADA,IAA/B,WAA+BA,CAA/B,EAAwD;AACtD;AACD;;AAED,UAAIC,UAAU,GAAGD,CAAC,CAADA,MAAC,CAADA,CAAjB,SAAiBA,EAAjB;AACA,UAAIE,aAAa,GAAGD,UAAU,GAAGD,CAAC,CAADA,MAAC,CAADA,CAAjC,MAAiCA,EAAjC;AAEA,UAAIG,OAAO,GAAGH,CAAC,CAADA,IAAC,CAADA,UAAd;AACA,UAAII,UAAU,GAAGD,OAAO,GAAGH,CAAC,CAADA,IAAC,CAADA,CAA3B,MAA2BA,EAA3B;AAEA,UAAIK,SAAS,GAAKD,UAAU,IAAX,aAACA,IAAiCD,OAAO,IAA1D;;AAEA,qBAAe;AAEb,YAAIN,IAAI,GAAGG,CAAC,CAAZ,IAAY,CAAZ;AACA,YAAIM,QAAQ,GAAGN,CAAC,CAADA,IAAC,CAADA,CAAf,IAAeA,EAAf;AACA,YAAIO,UAAU,GAAGD,QAAQ,CAARA,eAAjB,EAAiBA,CAAjB;AAEAN,SAAC,CAADA,IAAC,CAADA,4BAGI;AACEQ,iBAAO,EAAED;AADX,SAHJP,EAMI;AACES,kBAAQ,EADV;AAEEC,gBAAM,EAFR;AAGEC,cAAI,EAAE,mBAAc;AAClB,gBAAIC,MAAM,GAAGN,QAAQ,CAARA,MAAb,UAAaA,CAAb;AACA,gBAAIO,SAAS,GAAGC,IAAI,CAAJA,wDAAhB,KAAgBA,CAAhB;AACAjB,gBAAI,CAAJA,KAAUe,MAAM,CAANA,KAAVf,SAAUe,CAAVf;AANJ;AAQEkB,eAAK,EAAE,iBAAU;AACflB,gBAAI,CAAJA;AATJ;AAWEmB,kBAAQ,EAAE,oBAAU;AAClBnB,gBAAI,CAAJA;AACAA,gBAAI,CAAJA;AACD;AAdH,SANJG;AAwBD;AA5CHA;AA+CD;;AAEDL,QAAM,CAANA;AACAA,QAAM,CAANA;;AAEA,kBAAgB;AAChBjB,gBAAY,GAAGuC,QAAQ,CAARA,iBAAfvC,UAAeuC,CAAfvC;AACAe,iBAAa,GAAGwB,QAAQ,CAARA,iBAAhBxB,WAAgBwB,CAAhBxB;AACEyB,gBAAY,GAAGvB,MAAM,CAANA,cAAfuB;AACFC,gBAAY;AACVC,gBAAY;AACZC,mBAAe;AACjB7C,WAAO,CAAPA,IAAYyC,QAAQ,CAARA,KAAZzC;;AACA,QAAIwB,CAAC,CAADA,WAAC,CAADA,WAAyBiB,QAAQ,CAARA,mBAA7B,KAA8D;AAE7DA,cAAQ,CAARA;AACA;;AACDnB,cAAU,CAAC,YAAU;AACpB,UAAMwB,UAAU,GAAGL,QAAQ,CAARA,eAAnB,YAAmBA,CAAnB;AACAK,gBAAU,CAAVA;AACAA,gBAAU,CAAVA;AAHS,OAAVxB,GAAU,CAAVA;AAQA;;AAED,MAAIoB,YAAY,GAAhB;AACAK,MAAI;AApLL,K","file":"/scripts/animations.js","sourcesContent":["\nlet animSections = [];\n\n(function() {\n\n\tvar animElements, parallaxElems, lotties = {};\n\n\tfunction buildLotties() {\n\t\tconsole.log('buildLotties', lotties);\n\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\t\t\tvar dataAnim = element.dataset.animation;\n\n\t\t\tif(dataAnim && !animSections.includes(dataAnim)) {\n\t\t\t\tlet animation = bodymovin.loadAnimation( {\n\t\t\t\t\tcontainer: element.querySelector('.section-bg'),\n\t\t\t\t\trenderer: 'svg',\n\t\t\t\t\tloop: false,\n\t\t\t\t\tautoplay: false,\n\t\t\t\t\tpath: obj.templateUrl + '/dist/animations/'+dataAnim+'/data.json',\n\t\t\t\t\trendererSettings: {\n\t\t\t\t\t\tpreserveAspectRatio: 'xMinYMin slice',\n\t\t\t\t\t},\n\n\t\t\t\t} );\n\t\t\t\tlotties[dataAnim] = animation;\n\t\t\t}\n\n    }\n\t\tconsole.log('buildLotties', lotties);\n\t}\n\n  function checkSection() {\n\t\tparallaxSection();\n\t\t// var scrolled = window.pageYOffset;\n\n\t\t//fade in\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\t\t\tvar dataAnim = element.dataset.animation;\n\n      var positionFromTop = animElements[i].getBoundingClientRect().top;\n      if (positionFromTop - windowHeight <= 0) {\n\n\t\t\t\tif(element.classList.contains('scroll-fade-in') && element.classList.contains('anim-in')){\n\t\t\t\t\telement.classList.add('start-fade-in');\n\t\t\t\t\telement.classList.remove('fade-in');\n\t\t\t\t}\n\n\t\t\t\tif(dataAnim && !animSections.includes(dataAnim)) {\n\t\t\t\t\t// console.log(dataAnim);\n\t\t\t\t\tanimSections.push(dataAnim);\n\t\t\t\t\ttriggerLottie(element)\n\n\t\t\t\t}\n\n\t\t\t\t// console.log(element.dataset.animation);\n\t\t\t\t// element.style.marginTop = - (scrolled * 0.2) + 'px';\n      }\n    }\n  }\n\n\tfunction fadeInSection(section){\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\n      var positionFromTop = animElements[i].getBoundingClientRect().top;\n      if (positionFromTop - windowHeight <= 0) {\n\t\t\t\tconsole.log('fadeIn', section);\n\t\t\t\tif(element.classList.contains('fade-in')){\n\t\t\t\t\telement.classList.add('start-fade-in');\n\t\t\t\t\telement.classList.remove('fade-in');\n\t\t\t\t}\n\n      }\n    }\n\t}\n\n  function parallaxSection() {\n    for (var i = 0; i < parallaxElems.length; i++) {\n      var element = parallaxElems[i];\n\t\t\t// if(debounceTimer) {\n\t\t\t// \twindow.clearTimeout(debounceTimer);\n\t\t\t// }\n\t\t\t// debounceTimer = window.setTimeout(function() {\n\t\t\t\tvar scrolled = window.pageYOffset;\n\t\t\t\tvar scrollPos = -(scrolled * 0.15);\n\t\t\t\telement.style.transform = `translate(0, ${scrollPos}px)`;\n\t\t\t// }, 100);\n\t\t}\n  }\n\n\tfunction triggerLottie(elem) {\n\t\tif(!elem.dataset.animationdelay) elem.dataset.animationdelay = 0;\n\t\tconsole.log('triggerLottie', elem.dataset.animationdelay);\n\t\tif(lotties[elem.dataset.animation] != 'undefined') {\n\t\t\tsetTimeout(() => {\n\t\t\t\tlotties[elem.dataset.animation].play();\n\t\t\t\tlotties[elem.dataset.animation].addEventListener('complete', function() {\n\t\t\t\t\tconsole.log(elem.dataset.animation, 'done!');\n\t\t\t\t\tfadeInSection(elem.dataset.animation);\n\t\t\t\t})\n\t\t\t}, elem.dataset.animationdelay);\n\t\t}\n\t}\n\n  function runStatsCounter(){\n    $('.stats-value').each(function(){\n\n      if( $(this).is('.progress') || $(this).is('.complete') ){\n        return;\n      }\n\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(this).offset().top;\n      var elemBottom = elemTop + $(this).height();\n\n      var isVisible = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if( isVisible ){\n\n        var elem = $(this);\n        var thisText = $(this).text();\n        var statsValue = thisText.replace(/\\D/g, '');\n\n        $(this)\n          .prop('Counter', 0)\n          .animate(\n            {\n              Counter: statsValue,\n            },\n            {\n              duration: 4000,\n              easing: 'swing',\n              step: function(now) {\n                var pieces = thisText.split( statsValue );\n                var formatted = Math.ceil(now).toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n                elem.text(pieces.join(formatted));\n              },\n              start: function(){\n                elem.addClass('progress');\n              },\n              complete: function(){\n                elem.removeClass('progress');\n                elem.addClass('complete');\n              }\n            }\n          );\n\n      }\n\n    });\n  }\n\n  window.addEventListener('scroll', checkSection);\n  window.addEventListener('scroll', runStatsCounter);\n\n  function init() {\n\t\tanimElements = document.querySelectorAll('.anim-in');\n\t\tparallaxElems = document.querySelectorAll('.parallax');\n    windowHeight = window.innerHeight - 200;\n\t\tbuildLotties();\n    checkSection();\n    runStatsCounter();\n\t\tconsole.log(document.body.clientWidth);\n\t\tif( $('body.home').length && document.body.clientWidth > 640 ){\n\n\t\t\tdocument.documentElement.style.scrollSnapType = \"y mandatory\";\n\t\t}\n\t\tsetTimeout(function(){\n\t\t\tconst pageHeader = document.getElementById('pageHeader');\n\t\t\tpageHeader.classList.add('start-fade-in');\n\t\t\tpageHeader.classList.remove('fade-in');\n\t\t}, 500);\n\n\n\n\t}\n\n\tvar windowHeight = 0;\n\tinit();\n\n} )();\n"],"sourceRoot":""}