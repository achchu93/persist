{"version":3,"sources":["webpack:///./resources/assets/scripts/animations.js"],"names":["animSections","lotties","console","i","animElements","element","dataAnim","animation","container","renderer","loop","autoplay","path","obj","rendererSettings","preserveAspectRatio","parallaxSection","positionFromTop","triggerLottie","parallaxElems","scrolled","window","scrollPos","elem","setTimeout","fadeInSection","document","windowHeight","buildLotties","checkSection","$","pageHeader","init"],"mappings":"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","file":"/scripts/animations.js","sourcesContent":[" \nlet animSections = [];\n\n(function() {\n\n\tvar animElements, parallaxElems, lotties = {};\n\n\tfunction buildLotties() {\n\t\tconsole.log('buildLotties', lotties);\n\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\t\t\tvar dataAnim = element.dataset.animation;\n\n\t\t\tif(dataAnim && !animSections.includes(dataAnim)) {\n\t\t\t\tlet animation = bodymovin.loadAnimation( {\n\t\t\t\t\tcontainer: element.querySelector('.section-bg'),\n\t\t\t\t\trenderer: 'svg',\n\t\t\t\t\tloop: false,\n\t\t\t\t\tautoplay: false,\n\t\t\t\t\tpath: obj.templateUrl + '/dist/animations/'+dataAnim+'/data.json',\n\t\t\t\t\trendererSettings: {\n\t\t\t\t\t\tpreserveAspectRatio: 'xMinYMin slice',\n\t\t\t\t\t},\n\t\t\t\t\n\t\t\t\t} );\n\t\t\t\tlotties[dataAnim] = animation;\n\t\t\t}\n\t\t\t\n    }\n\t\tconsole.log('buildLotties', lotties);\n\t}\n\n  function checkSection() {\n\t\tparallaxSection();\n\t\t// var scrolled = window.pageYOffset;\n\n\t\t//fade in\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\t\t\tvar dataAnim = element.dataset.animation;\n\t\t\t\n      var positionFromTop = animElements[i].getBoundingClientRect().top;\n      if (positionFromTop - windowHeight <= 0) {\n\n\t\t\t\tif(element.classList.contains('scroll-fade-in') && element.classList.contains('anim-in')){\n\t\t\t\t\telement.classList.add('start-fade-in');\n\t\t\t\t\telement.classList.remove('fade-in');\n\t\t\t\t}\n\n\t\t\t\tif(dataAnim && !animSections.includes(dataAnim)) {\n\t\t\t\t\t// console.log(dataAnim);\n\t\t\t\t\tanimSections.push(dataAnim);\n\t\t\t\t\ttriggerLottie(element) \n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// console.log(element.dataset.animation);\n\t\t\t\t// element.style.marginTop = - (scrolled * 0.2) + 'px';\n      }\n    }\n  }\n\n\tfunction fadeInSection(section){\n    for (var i = 0; i < animElements.length; i++) {\n      var element = animElements[i];\n\t\t\t\n      var positionFromTop = animElements[i].getBoundingClientRect().top;\n      if (positionFromTop - windowHeight <= 0) {\n\t\t\t\tconsole.log('fadeIn', section);\n\t\t\t\tif(element.classList.contains('fade-in')){\n\t\t\t\t\telement.classList.add('start-fade-in');\n\t\t\t\t\telement.classList.remove('fade-in');\n\t\t\t\t}\n\n      }\n    }\t\t\n\t}\n\n  function parallaxSection() {\n    for (var i = 0; i < parallaxElems.length; i++) {\n      var element = parallaxElems[i];\n\t\t\t// if(debounceTimer) {\n\t\t\t// \twindow.clearTimeout(debounceTimer);\n\t\t\t// }\n\t\t\t// debounceTimer = window.setTimeout(function() {\n\t\t\t\tvar scrolled = window.pageYOffset;\n\t\t\t\tvar scrollPos = -(scrolled * 0.15);\n\t\t\t\telement.style.transform = `translate(0, ${scrollPos}px)`;\n\t\t\t// }, 100);\n\t\t}\n  }\n\n\tfunction triggerLottie(elem) {\n\t\tif(!elem.dataset.animationdelay) elem.dataset.animationdelay = 0;\n\t\tconsole.log('triggerLottie', elem.dataset.animationdelay);\n\t\tif(lotties[elem.dataset.animation] != 'undefined') {\n\t\t\tsetTimeout(() => { \n\t\t\t\tlotties[elem.dataset.animation].play();\n\t\t\t\tlotties[elem.dataset.animation].addEventListener('complete', function() {\n\t\t\t\t\tconsole.log(elem.dataset.animation, 'done!');\n\t\t\t\t\tfadeInSection(elem.dataset.animation);\n\t\t\t\t})\n\t\t\t}, elem.dataset.animationdelay);\n\t\t}\n\t}\n\n  window.addEventListener('scroll', checkSection);\n\n  function init() {\n\t\tanimElements = document.querySelectorAll('.anim-in');\n\t\tparallaxElems = document.querySelectorAll('.parallax');\n    windowHeight = window.innerHeight - 200;\n\t\tbuildLotties();\n    checkSection();\n\t\tif( $('body.home').length ){\n\t\t\tconsole.log('home');\n\t\t\tdocument.documentElement.style.scrollSnapType = \"y mandatory\";\n\t\t}\n\t\tsetTimeout(function(){\n\t\t\tconst pageHeader = document.getElementById('pageHeader');\n\t\t\tpageHeader.classList.add('start-fade-in');\n\t\t\tpageHeader.classList.remove('fade-in');\n\t\t}, 500);\n\n\n\t\t\n\t}\n\n\tvar windowHeight = 0;\n\tinit();\n\n} )();"],"sourceRoot":""}